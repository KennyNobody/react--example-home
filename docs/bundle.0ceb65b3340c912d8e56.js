"use strict";(self.webpackChunkreact_home=self.webpackChunkreact_home||[]).push([[587],{4433:(e,t,s)=>{s.d(t,{p:()=>x,d:()=>g});var a=s(7294),r=s(4184),i=s.n(r),c=s(743),o=s(7048),n=s(3653),l=s(8085),d=s(7264);const u={};var g=function(e){return e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC",e}(g||{}),m=s(6778),p=s(3739),v=s(4268),h=s(1341),_=s(3081);const y=(0,v.hg)("postList/initPostList",(async(e,t)=>{const{dispatch:s,getState:a}=t,r=(0,_.qx)(a())||1,i={[h.Z.PAGE]:1,[h.Z.SIZE]:r,sort:"publishedAt:DESC",replace:!1};await e(i,!0).then((e=>{const{data:t,meta:a}=e.data;s(p._f.setData(t)),s(p._f.setPagination(a.pagination))}))}));var A=s(5893);const f={postList:p.dI,sortFilter:d.U},x=e=>{const{mode:t,className:s}=e,r=(0,a.useRef)(),d=(0,n.T)(),v=(0,c.v9)(p.UI.selectAll),h=(0,c.v9)(_.Th),x=(0,c.v9)(_.Uv),L=(0,c.v9)(_.sZ),[N]=(0,o.vQ)({}),P=(0,a.useCallback)((()=>{x&&L&&L<x&&!h&&d((0,m.y)({getData:N,replace:!1,direction:m.F.NEXT}))}),[d]);return(0,a.useEffect)((()=>{d(y(N))}),[]),function(e){let{callback:t,triggerRef:s}=e;(0,a.useEffect)((()=>{let e=null;const a=s.current;if(t&&a){const s={root:document,rootMargin:"0px",threshold:1};e=new IntersectionObserver((e=>{let[s]=e;s.isIntersecting&&t()}),s),e.observe(a)}return()=>{e&&e?.unobserve(a)}}),[t,s])}({triggerRef:r,callback:P}),(0,A.jsx)(l.W,{reducers:f,removeAfterUnmount:!0,children:(0,A.jsxs)("div",{className:i()(u.block,s),children:[(0,A.jsx)(o.eJ,{data:v,showSkeleton:h}),t===g.DYNAMIC&&(0,A.jsx)("div",{ref:r})]})})}},3081:(e,t,s)=>{s.d(t,{Th:()=>a,Uv:()=>i,qx:()=>r,sZ:()=>c});const a=e=>e?.postList?.isLoading,r=e=>e?.postList?.perPage,i=e=>e?.postList?.page,c=e=>e?.postList?.count},6778:(e,t,s)=>{s.d(t,{F:()=>n,y:()=>l});var a=s(4268),r=s(1341),i=s(9239),c=s(3081),o=s(3739);let n=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}({});const l=(0,a.hg)("postList/initPostList",(async(e,t)=>{const{getState:s,dispatch:a}=t,{replace:l,direction:d}=e,u=(0,c.qx)(s())||1,g=(0,c.Uv)(s())||1,m=(0,i.c)(s()),p=(0,c.sZ)(s());let v=g;v=d===n.NEXT?g===p?v:v+1:d===n.PREV?1===g?v:v-1:1;const h={[r.Z.SIZE]:u,[r.Z.PAGE]:l?1:v,sort:"publishedAt:DESC",replace:l};m&&(h[r.Z.CAT]=m),await e.getData(h,!0).then((e=>{const{data:t,meta:s}=e.data,r=l?o._f.replaceData:o._f.setData;a(r(t)),a(o._f.setPagination(s.pagination))}))}))},3739:(e,t,s)=>{s.d(t,{UI:()=>c,_f:()=>l,dI:()=>n});var a=s(4268),r=s(7048);const i=(0,a.HF)();i.selectId=e=>e.id;const c=i.getSelectors((e=>e.postList||i.getInitialState())),o=(0,a.oM)({name:"postListSlice",initialState:{page:1,perPage:8,isLoading:!1,errors:void 0,count:1,ids:[],entities:{}},reducers:{setPage:(e,t)=>{e.page=t.payload},setLength:(e,t)=>{e.count=t.payload},setData:(e,t)=>{console.log("Выставили"),i.addMany(e,t.payload)},replaceData:(e,t)=>{console.log("Заменили"),i.setAll(e,t.payload)},setPagination:(e,t)=>{const s=t.payload;console.log(s),e.page=s.page,e.count=s.pageCount}},extraReducers:e=>{const t=r.Fv.endpoints.fetchPostList;e.addMatcher(t.matchPending,((e,t)=>{const{replace:s}=t.meta.arg.originalArgs;s&&i.removeAll(e),e.errors=void 0,e.isLoading=!0})).addMatcher(t.matchFulfilled,(e=>{e.isLoading=!1})).addMatcher(t.matchRejected,((e,t)=>{e.isLoading=!1,e.errors=t.payload}))}}),{reducer:n,actions:l}=o},9239:(e,t,s)=>{s.d(t,{c:()=>a});const a=e=>e?.sortFilter?.category},7264:(e,t,s)=>{s.d(t,{U:()=>r,e:()=>i});const a=(0,s(4268).oM)({name:"sortFilterSlice",initialState:{category:void 0},reducers:{toggleCategory:(e,t)=>{e.category===t.payload?e.category=void 0:e.category=t.payload}}}),{reducer:r,actions:i}=a},7048:(e,t,s)=>{s.d(t,{Px:()=>l,eJ:()=>h,Fv:()=>A,vQ:()=>f});var a=s(7294),r=s(4184),i=s.n(r),c=s(3653);const o={};var n=s(5893);const l=(0,a.memo)((e=>{const{slug:t,className:s}=e;return(0,c.T)(),(0,n.jsx)("div",{className:i()(o.block,s),children:"DetailPost"})}));var d=s(4544);const u={};var g=s(9655),m=s(5176);const p="src-4_entities-Post-ui-ArticlePost-ArticlePost-module__article-KgWk4",v=e=>{const{data:t,className:s}=e,a=(0,n.jsx)("div",{className:i()(p,"src-4_entities-Post-ui-ArticlePost-ArticlePost-module__article--skeleton-x2YHg",s)}),r=(0,n.jsx)(g.rU,{to:`${m.ag.detail}${t?.slug}`,className:i()(p,s),children:t?.title&&(0,n.jsx)("h3",{className:i()("src-4_entities-Post-ui-ArticlePost-ArticlePost-module__title-AKFho"),children:t.title})});return t?r:a},h=e=>{const{data:t,showSkeleton:s,className:a}=e,r=new Array(12).fill(null).map(((e,t)=>(0,n.jsx)("div",{className:i()(d.Z["grid__col-1"]),children:(0,n.jsx)(v,{})},t))),c=t&&t?.length>0&&t.map(((e,t)=>(0,n.jsx)("div",{className:i()(d.Z["grid__col-1"]),children:(0,n.jsx)(v,{data:e})},t)));return(0,n.jsx)("div",{className:i()(d.Z.grid,u.grid,a),children:s?r:c})};var _=s(8571),y=s(8363);const A=_.p.injectEndpoints({endpoints:e=>({fetchPostList:e.query({query:e=>({url:y.Z.POSTS_LIST,params:e}),providesTags:["post"]})}),overrideExisting:!1}),f=(A.useFetchPostListQuery,A.useLazyFetchPostListQuery)},3653:(e,t,s)=>{s.d(t,{T:()=>r});var a=s(743);const r=()=>(0,a.I0)()},1341:(e,t,s)=>{s.d(t,{Z:()=>a});var a=function(e){return e.PAGE="pagination[page]",e.SIZE="pagination[pageSize]",e.CAT="filters[category][id][$eq]",e}(a||{})},8587:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(7294),r=s(4184),i=s.n(r);const c="src-4_entities-Category-ui-ArticleCategory-ArticleCategory-module__link-tVoXe";var o=s(5893);const n=e=>{const{name:t,data:s,className:a,isActive:r,clickEvent:n}=e,l=(0,o.jsx)("div",{className:i()(c,"src-4_entities-Category-ui-ArticleCategory-ArticleCategory-module__link--skeleton-ijlUA",a)}),d=(0,o.jsxs)("label",{className:i()(c,{"src-4_entities-Category-ui-ArticleCategory-ArticleCategory-module__link--active-l72E0":r},a),children:[(0,o.jsx)("input",{name:t,type:"radio",value:s?.id,checked:r,onClick:()=>{n&&r&&n(void 0)},onChange:()=>{n&&n(s)},className:i()("src-4_entities-Category-ui-ArticleCategory-ArticleCategory-module__input-VnIP6")}),s?.title]});return s?d:l},l=e=>{const{data:t,className:s,selectEvent:a,showSkeleton:r,selectedItem:c}=e,l=new Array(5).fill(null).map(((e,t)=>(0,o.jsx)(n,{},t))),d=t&&t?.length>0&&t.map((e=>(0,o.jsx)(n,{data:e,name:"category",clickEvent:a,isActive:c===e.id},e.id)));return(0,o.jsx)("form",{className:i()("src-4_entities-Category-ui-ListCategory-ListCategory-module__nav-n8YbS",s),children:r?l:d})};var d=s(8571),u=s(8363);const g=d.p.injectEndpoints({endpoints:e=>({fetchCategoryList:e.query({query:e=>({url:u.Z.CATEGORIES_LIST,params:{_limit:e}}),providesTags:["category"]})}),overrideExisting:!1}).useFetchCategoryListQuery;var m=s(3653),p=s(7264),v=s(8085),h=s(743),_=s(9239),y=s(6778),A=s(7048),f=s(3739);const x={},L={sortFilter:p.U,postList:f.dI},N=e=>{const{className:t}=e,s=(0,m.T)(),r=(0,h.v9)(_.c),{data:c,isLoading:n}=g(10),[d]=(0,A.vQ)({}),u=function(e,t){const s=(0,a.useRef)();return(0,a.useCallback)((function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{e(...a)}),500)}),[e,500])}((()=>{s((0,y.y)({getData:d,replace:!0}))})),f=(0,a.useCallback)((e=>{s(p.e.toggleCategory(e?.id||void 0)),u()}),[s]);return(0,o.jsx)(v.W,{reducers:L,children:(0,o.jsx)("div",{className:i()(x.block,t),children:(0,o.jsx)(l,{data:c?.data,selectEvent:f,selectedItem:r,showSkeleton:n})})})};var P=s(4433),j=s(4544),C=s(5492),E=s(8825);const k={page:"src-1_pages-ListPage-ui-ListPage-module__page-eSPR3",category:"src-1_pages-ListPage-ui-ListPage-module__category-VDV4D",subtitle:"src-1_pages-ListPage-ui-ListPage-module__subtitle-zbevr"},T=function(){return(0,o.jsx)("div",{className:k.page,children:(0,o.jsxs)(C.W,{children:[(0,o.jsxs)("div",{className:i()(j.Z.grid,k.header),children:[(0,o.jsx)("div",{className:i()(j.Z["grid__col-2"]),children:(0,o.jsx)(E.D,{mode:E.V.REGULAR,children:"Заметки"})}),(0,o.jsxs)("div",{className:i()(j.Z["grid__col-2"]),children:[(0,o.jsx)(E.D,{className:i()(k.subtitle),mode:E.V.REGULAR,children:"2016 — 2023"}),(0,o.jsx)(N,{className:i()(k.category)})]})]}),(0,o.jsx)(P.p,{mode:P.d.DYNAMIC})]})})}},8085:(e,t,s)=>{s.d(t,{W:()=>i});var a=s(7294),r=s(743);const i=e=>{const{children:t,reducers:s,removeAfterUnmount:i}=e,c=(0,r.oR)(),o=(0,r.I0)();return(0,a.useEffect)((()=>{const e=c.reducerManager.getReducerMap();return Object.entries(s).forEach((t=>{let[s,a]=t;e[s]||(c.reducerManager.add(s,a),o({type:`@INIT: ${s} reducer`}))})),()=>{i&&Object.entries(s).forEach((e=>{let[t]=e;c.reducerManager.remove(t),o({type:`@REMOVE: ${t} reducer`})}))}}),[]),t}},8825:(e,t,s)=>{s.d(t,{D:()=>l,V:()=>n});var a=s(4184),r=s.n(a),i=s(7294);const c={block:"src-5_shared-ui-Title-Title-module__block-TKGLg","block--main":"src-5_shared-ui-Title-Title-module__block--main-mcKnJ","block--regular":"src-5_shared-ui-Title-Title-module__block--regular-EWs3g"};var o=s(5893);let n=function(e){return e.MAIN="main",e.REGULAR="regular",e}({});const l=(0,i.memo)((e=>{const{className:t,mode:s,children:a}=e,i=s===n.MAIN?"h1":"h2";return(0,o.jsx)(i,{className:r()(c.block,c[`block--${s}`],t),children:a})}))}}]);