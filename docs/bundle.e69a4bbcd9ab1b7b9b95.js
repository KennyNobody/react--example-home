"use strict";(self.webpackChunkreact_home=self.webpackChunkreact_home||[]).push([[499],{4433:(e,t,s)=>{s.d(t,{p:()=>N,d:()=>g});var a=s(7294),r=s(4184),c=s.n(r),i=s(743),n=s(7048),o=s(3653),l=s(8085),d=s(7264);const u={};var g=function(e){return e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC",e}(g||{}),h=s(6778),m=s(3739),p=s(4268),v=s(1341),_=s(3081);const x=(0,p.hg)("postList/initPostList",(async(e,t)=>{const{dispatch:s,getState:a}=t,r=(0,_.qx)(a())||1,c={[v.Z.PAGE]:1,[v.Z.SIZE]:r,sort:"publishedAt:DESC",replace:!1};await e(c,!0).then((e=>{const{data:t,meta:a}=e.data;s(m._f.setData(t)),s(m._f.setPagination(a.pagination))}))}));var P=s(5893);const j={postList:m.dI,sortFilter:d.U},N=e=>{const{mode:t,className:s}=e,r=(0,a.useRef)(),d=(0,o.T)(),p=(0,i.v9)(m.UI.selectAll),v=(0,i.v9)(_.Th),N=(0,i.v9)(_.Uv),T=(0,i.v9)(_.sZ),[f]=(0,n.vQ)({}),y=(0,a.useCallback)((()=>{N&&T&&T<N&&!v&&d((0,h.y)({getData:f,replace:!1,direction:h.F.NEXT}))}),[d]);return(0,a.useEffect)((()=>{d(x(f))}),[]),function(e){let{callback:t,triggerRef:s}=e;(0,a.useEffect)((()=>{let e=null;const a=s.current;if(t&&a){const s={root:document,rootMargin:"0px",threshold:1};e=new IntersectionObserver((e=>{let[s]=e;s.isIntersecting&&t()}),s),e.observe(a)}return()=>{e&&e?.unobserve(a)}}),[t,s])}({triggerRef:r,callback:y}),(0,P.jsx)(l.W,{reducers:j,removeAfterUnmount:!0,children:(0,P.jsxs)("div",{className:c()(u.block,s),children:[(0,P.jsx)(n.eJ,{data:p,showSkeleton:v}),t===g.DYNAMIC&&(0,P.jsx)("div",{ref:r})]})})}},3081:(e,t,s)=>{s.d(t,{Th:()=>a,Uv:()=>c,qx:()=>r,sZ:()=>i});const a=e=>e?.postList?.isLoading,r=e=>e?.postList?.perPage,c=e=>e?.postList?.page,i=e=>e?.postList?.count},6778:(e,t,s)=>{s.d(t,{F:()=>o,y:()=>l});var a=s(4268),r=s(1341),c=s(9239),i=s(3081),n=s(3739);let o=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}({});const l=(0,a.hg)("postList/initPostList",(async(e,t)=>{const{getState:s,dispatch:a}=t,{replace:l,direction:d}=e,u=(0,i.qx)(s())||1,g=(0,i.Uv)(s())||1,h=(0,c.c)(s()),m=(0,i.sZ)(s());let p=g;p=d===o.NEXT?g===m?p:p+1:d===o.PREV?1===g?p:p-1:1;const v={[r.Z.SIZE]:u,[r.Z.PAGE]:l?1:p,sort:"publishedAt:DESC",replace:l};h&&(v[r.Z.CAT]=h),await e.getData(v,!0).then((e=>{const{data:t,meta:s}=e.data,r=l?n._f.replaceData:n._f.setData;a(r(t)),a(n._f.setPagination(s.pagination))}))}))},3739:(e,t,s)=>{s.d(t,{UI:()=>i,_f:()=>l,dI:()=>o});var a=s(4268),r=s(7048);const c=(0,a.HF)();c.selectId=e=>e.id;const i=c.getSelectors((e=>e.postList||c.getInitialState())),n=(0,a.oM)({name:"postListSlice",initialState:{page:1,perPage:8,isLoading:!1,errors:void 0,count:1,ids:[],entities:{}},reducers:{setPage:(e,t)=>{e.page=t.payload},setLength:(e,t)=>{e.count=t.payload},setData:(e,t)=>{console.log("Выставили"),c.addMany(e,t.payload)},replaceData:(e,t)=>{console.log("Заменили"),c.setAll(e,t.payload)},setPagination:(e,t)=>{const s=t.payload;console.log(s),e.page=s.page,e.count=s.pageCount}},extraReducers:e=>{const t=r.Fv.endpoints.fetchPostList;e.addMatcher(t.matchPending,((e,t)=>{const{replace:s}=t.meta.arg.originalArgs;s&&c.removeAll(e),e.errors=void 0,e.isLoading=!0})).addMatcher(t.matchFulfilled,(e=>{e.isLoading=!1})).addMatcher(t.matchRejected,((e,t)=>{e.isLoading=!1,e.errors=t.payload}))}}),{reducer:o,actions:l}=n},9239:(e,t,s)=>{s.d(t,{c:()=>a});const a=e=>e?.sortFilter?.category},7264:(e,t,s)=>{s.d(t,{U:()=>r,e:()=>c});const a=(0,s(4268).oM)({name:"sortFilterSlice",initialState:{category:void 0},reducers:{toggleCategory:(e,t)=>{e.category===t.payload?e.category=void 0:e.category=t.payload}}}),{reducer:r,actions:c}=a},7048:(e,t,s)=>{s.d(t,{Px:()=>l,eJ:()=>v,Fv:()=>P,vQ:()=>j});var a=s(7294),r=s(4184),c=s.n(r),i=s(3653);const n={};var o=s(5893);const l=(0,a.memo)((e=>{const{slug:t,className:s}=e;return(0,i.T)(),(0,o.jsx)("div",{className:c()(n.block,s),children:"DetailPost"})}));var d=s(4544);const u={};var g=s(9655),h=s(5176);const m="src-4_entities-Post-ui-ArticlePost-ArticlePost-module__article-KgWk4",p=e=>{const{data:t,className:s}=e,a=(0,o.jsx)("div",{className:c()(m,"src-4_entities-Post-ui-ArticlePost-ArticlePost-module__article--skeleton-x2YHg",s)}),r=(0,o.jsx)(g.rU,{to:`${h.ag.detail}${t?.slug}`,className:c()(m,s),children:t?.title&&(0,o.jsx)("h3",{className:c()("src-4_entities-Post-ui-ArticlePost-ArticlePost-module__title-AKFho"),children:t.title})});return t?r:a},v=e=>{const{data:t,showSkeleton:s,className:a}=e,r=new Array(12).fill(null).map(((e,t)=>(0,o.jsx)("div",{className:c()(d.Z["grid__col-1"]),children:(0,o.jsx)(p,{})},t))),i=t&&t?.length>0&&t.map(((e,t)=>(0,o.jsx)("div",{className:c()(d.Z["grid__col-1"]),children:(0,o.jsx)(p,{data:e})},t)));return(0,o.jsx)("div",{className:c()(d.Z.grid,u.grid,a),children:s?r:i})};var _=s(8571),x=s(8363);const P=_.p.injectEndpoints({endpoints:e=>({fetchPostList:e.query({query:e=>({url:x.Z.POSTS_LIST,params:e}),providesTags:["post"]})}),overrideExisting:!1}),j=(P.useFetchPostListQuery,P.useLazyFetchPostListQuery)},3653:(e,t,s)=>{s.d(t,{T:()=>r});var a=s(743);const r=()=>(0,a.I0)()},1341:(e,t,s)=>{s.d(t,{Z:()=>a});var a=function(e){return e.PAGE="pagination[page]",e.SIZE="pagination[pageSize]",e.CAT="filters[category][id][$eq]",e}(a||{})},4499:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(7294),r=s(4184),c=s.n(r);var i=s(5893);const n=e=>{const{className:t,children:s}=e;return(0,i.jsx)("main",{className:c()("src-5_shared-ui-Main-ui-Main-module__block-BM7gP",t),children:s})},o=e=>{const{children:t,className:s}=e;return(0,i.jsx)("div",{className:c()("src-5_shared-ui-Stack-ui-Stack-module__block-oCy9Z",s),children:t})};var l=s(8571),d=s(8363);const u=l.p.injectEndpoints({endpoints:e=>({fetchPageFront:e.query({query:()=>({url:d.Z.PAGE_FRONT,params:{populate:"*"}})})}),overrideExisting:!1}).useFetchPageFrontQuery;var g=s(9655),h=s(4433);const m=e=>{const{children:t,className:s}=e;return(0,i.jsx)("div",{className:c()("src-5_shared-ui-Toolbar-ui-Toolbar-module__block-PJPoL",s),children:t})};var p=s(4544),v=s(5492);let _=function(e){return e.DEV="dev",e.PHOTO="photo",e.POST="post",e}({});const x=(0,a.memo)((e=>{const{children:t,className:s,...a}=e;return(0,i.jsx)("a",{...a,target:"_blank",rel:"noopener noreferrer",className:c()("src-5_shared-ui-LinkTitle-LinkTitle-module__block-eciUx",s),children:t})}));var P=s(8825),j=s(5176);const N={header:"src-2_widgets-Section-ui-Section-module__header-JLupM"},T={[_.DEV]:(0,i.jsx)(i.Fragment,{children:"DEVListFeature"}),[_.PHOTO]:(0,i.jsx)(i.Fragment,{children:"PHOTOListFeature"}),[_.POST]:(0,i.jsx)(h.p,{mode:h.d.STATIC})},f=e=>{const{data:t,className:s}=e;return(0,i.jsx)("section",{className:c()(N.SectionPosts,s),children:(0,i.jsxs)(v.W,{children:[(0,i.jsxs)("div",{className:c()(p.Z.grid,N.header),children:[(0,i.jsx)("div",{className:c()(p.Z["grid__col-2"]),children:t?.title&&(0,i.jsx)(P.D,{mode:P.V.REGULAR,children:t?.title})}),(0,i.jsx)("div",{className:c()(p.Z["grid__col-2"]),children:(0,i.jsxs)(m,{children:[t?.years&&(0,i.jsx)(P.D,{mode:P.V.REGULAR,children:t.years}),t?.linkTitle&&t?.linkPath&&(0,i.jsx)(x,{href:t.linkPath,children:t.linkTitle})]})})]}),t?.contentKey&&T[t?.contentKey],(0,i.jsxs)("div",{className:c()(p.Z.grid),children:[(0,i.jsx)("div",{className:c()(p.Z["grid__col-2"])}),(0,i.jsx)("div",{className:c()(p.Z["grid__col-2"]),children:(0,i.jsx)(m,{children:(0,i.jsx)(g.rU,{to:j.ag.list,children:"Все заметки"})})})]})]})})},y=function(){const{data:e,isLoading:t}=u(null);return(0,i.jsx)(n,{className:"src-1_pages-FrontPage-ui-FrontPage-FrontPage-module__page-HORYw",children:(0,i.jsx)(o,{children:e?.data?.section?.length&&e?.data?.section.map((e=>(0,i.jsx)(f,{data:e},e.id)))})})}},8085:(e,t,s)=>{s.d(t,{W:()=>c});var a=s(7294),r=s(743);const c=e=>{const{children:t,reducers:s,removeAfterUnmount:c}=e,i=(0,r.oR)(),n=(0,r.I0)();return(0,a.useEffect)((()=>{const e=i.reducerManager.getReducerMap();return Object.entries(s).forEach((t=>{let[s,a]=t;e[s]||(i.reducerManager.add(s,a),n({type:`@INIT: ${s} reducer`}))})),()=>{c&&Object.entries(s).forEach((e=>{let[t]=e;i.reducerManager.remove(t),n({type:`@REMOVE: ${t} reducer`})}))}}),[]),t}},8825:(e,t,s)=>{s.d(t,{D:()=>l,V:()=>o});var a=s(4184),r=s.n(a),c=s(7294);const i={block:"src-5_shared-ui-Title-Title-module__block-TKGLg","block--main":"src-5_shared-ui-Title-Title-module__block--main-mcKnJ","block--regular":"src-5_shared-ui-Title-Title-module__block--regular-EWs3g"};var n=s(5893);let o=function(e){return e.MAIN="main",e.REGULAR="regular",e}({});const l=(0,c.memo)((e=>{const{className:t,mode:s,children:a}=e,c=s===o.MAIN?"h1":"h2";return(0,n.jsx)(c,{className:r()(i.block,i[`block--${s}`],t),children:a})}))}}]);